<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fondation Florence</title>
    <style>
        /* Variables et r√©initialisation CSS */
        :root {
            --primary-color: #2F80ED;
            --secondary-color: #4F4F4F;
            --background-color: #F9F9F9;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --black: #333333;
            --success: #27AE60;
            --danger: #EB5757;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: var(--background-color);
        }

        /* Navigation principale */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: var(--white);
            border-bottom: 1px solid var(--light-gray);
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo img {
            height: 40px;
        }
        
        .nav-main {
            display: flex;
            gap: 2rem;
        }
        
        .nav-main a {
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
            padding: 0.5rem 0;
        }
        
        .nav-main a.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .user-profile img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }

        /* Sous-navigation */
        .sub-nav {
            display: flex;
            justify-content: center;
            background-color: var(--white);
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .sub-nav a {
            padding: 0.5rem 1.5rem;
            text-decoration: none;
            color: var(--secondary-color);
            margin: 0 1rem;
        }
        
        .sub-nav a.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }

        /* Conteneur principal */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--black);
            margin-bottom: 0.5rem;
        }
        
        .section-description {
            color: var(--secondary-color);
            margin-bottom: 2rem;
        }

        /* Barre de recherche */
        .search-container {
            position: relative;
            margin-bottom: 2rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-size: 1rem;
        }
        
        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-color);
        }

        /* Filtres */
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .filter-dropdown {
            padding: 0.5rem 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            background-color: var(--white);
            min-width: 150px;
            cursor: pointer;
        }
        
        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            background-color: var(--white);
            cursor: pointer;
        }
        
        .filter-btn.active {
            background-color: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }

        /* Grille de contenu */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }
        
        .content-card {
            background-color: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .card-media {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* Ratio 16:9 */
        }
        
        .card-media iframe, .card-media .document-preview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .document-preview {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--light-gray);
        }
        
        .document-preview img {
            width: 40px;
            opacity: 0.6;
        }
        
        .card-info {
            padding: 1rem;
        }
        
        .card-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--black);
        }
        
        .card-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
            font-size: 0.9rem;
        }
        
        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .tag {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            background-color: var(--light-gray);
            border-radius: 4px;
            color: var(--secondary-color);
        }

        /* Onglets Flo NU */
        .tertiary-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .tertiary-nav button {
            padding: 0.7rem 1.5rem;
            background-color: var(--white);
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            white-space: nowrap;
            cursor: pointer;
        }
        
        .tertiary-nav button.active {
            background-color: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
        }

        /* Quiz */
        .quiz-container {
            background-color: var(--white);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }
        
        .quiz-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--black);
        }
        
        .quiz-question {
            margin-bottom: 2rem;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .answer-option {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            cursor: pointer;
        }
        
        .answer-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(47, 128, 237, 0.05);
        }
        
        .answer-option.correct {
            border-color: var(--success);
            background-color: rgba(39, 174, 96, 0.05);
        }
        
        .answer-option.incorrect {
            border-color: var(--danger);
            background-color: rgba(235, 87, 87, 0.05);
        }
        
        .explanation {
            background-color: rgba(47, 128, 237, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 4px 4px 0;
        }
        
        .quiz-actions {
            margin-top: 2rem;
            display: flex;
            justify-content: space-between;
        }
        
        .quiz-btn {
            padding: 0.8rem 1.5rem;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .quiz-btn:disabled {
            background-color: var(--light-gray);
            color: var(--secondary-color);
            cursor: not-allowed;
        }

        /* Document Viewer */
        .document-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .document-viewer.active {
            display: flex;
        }
        
        .viewer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: var(--white);
        }
        
        .viewer-title {
            font-weight: 500;
        }
        
        .close-viewer {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .document-content {
            padding: 2rem;
            background-color: var(--white);
            overflow-y: auto;
            flex: 1;
            line-height: 1.6;
            font-size: 1.1rem;
            display: none;
        }
        
        .document-frame {
            flex: 1;
            border: none;
            display: none;
        }

        /* Ajout de styles sp√©cifiques pour les miniatures */
        .custom-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        
        .default-icon {
            width: 40px;
            height: 40px;
            opacity: 0.6;
            object-fit: contain;
        }
        
        /* Entretiens blancs */

        /* Contenu cach√© par d√©faut */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Sous-navigation -->
    <div class="sub-nav">
        <a href="#" class="main-tab active" data-tab="videotheque">VID√âOS</a>
        <a href="#" class="main-tab" data-tab="training">TRAINING</a>
        <a href="#" class="main-tab" data-tab="ressources">RESSOURCES</a>
    </div>

    <!-- Conteneur principal -->
    <div class="main-container">
        <!-- Vid√©oth√®que -->
        <div id="videotheque" class="tab-content active">
            <h1 class="section-title">VID√âOTH√àQUE</h1>
            <p class="section-description">La vid√©oth√®que regroupe l'ensemble des vid√©os et des podcasts enregistr√©s lors des webinaires organis√©s par Florence.</p>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Rechercher dans la vid√©oth√®que" id="video-search">
                <span class="search-icon">üîç</span>
            </div>
            
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Tous</button>
                <select class="filter-dropdown" id="type-filter">
                    <option value="">Types</option>
                    <option value="conferences">Conf√©rences & Webinaire</option>
                    <option value="evenements">√âv√©nements</option>
                    <option value="clubs">Clubs Pros</option>
                    <option value="tutoriel">Tutoriel</option>
                </select>
                <select class="filter-dropdown" id="subtype-filter">
                    <option value="">Cat√©gorie</option>
                    <option value="club_diplo">Club Diplo</option>
                    <option value="femmes_florence">Femmes de Florence</option>
                    <option value="pizzart">Pizz'Art</option>
                    <option value="webinaires">Webinaires</option>
                    <option value="soiree">Soir√©e</option>
                    <option value="sport">Sport</option>
                    <option value="eloquence">√âloquence</option>
                    <option value="investclub">InvestClub</option>
                    <option value="club_nego">Club de N√©go</option>
                    <option value="stem_club">Stem Club</option>
                    <option value="club_cracks">Club des cracks</option>
                    <option value="talent">Tuto Talent</option>
                    <option value="mentor">Tuto Mentor</option>
                    <option value="supra">Tuto Supra</option>
                </select>
                <select class="filter-dropdown" id="duration-filter">
                    <option value="">Dur√©e</option>
                    <option value="short">Moins de 30 min</option>
                    <option value="medium">30 min - 1h</option>
                    <option value="long">Plus d'1h</option>
                </select>
                <select class="filter-dropdown" id="tag-filter">
                    <option value="">Tags</option>
                    <option value="finance">Finance</option>
                    <option value="droit">Droit</option>
                    <option value="entrepreneuriat">Entrepreneuriat</option>
                    <option value="conseil">Conseil</option>
                    <option value="coaching">Coaching</option>
                    <option value="rh">RH</option>
                    <option value="politique">Politique</option>
                    <option value="international">International</option>
                    <option value="art-culture">Art & Culture</option>
                    <option value="gastronomie">Gastronomie</option>
                    <option value="exposition">Exposition</option>
                    <option value="soci√©t√©">Soci√©t√©</option>
                    <option value="√©ducation">√âducation</option>
                    <option value="mentorat">Mentorat</option>
                </select>
            </div>
            
            <div class="content-grid" id="videos-grid">
                <!-- Les vid√©os seront g√©n√©r√©es ici par JavaScript -->
            </div>
        </div>

        <!-- Ressources entreprises -->
        <div id="ressources" class="tab-content">
            <h1 class="section-title">RESSOURCES</h1>
            <p class="section-description">Cette section contient tous les documents essentiels au fonctionnement de la fondation Florence et √† l'information des talents.</p>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Rechercher dans les ressources" id="ressource-search">
                <span class="search-icon">üîç</span>
            </div>
            
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Tous</button>
                <button class="filter-btn" data-filter="about">√Ä propos de Florence</button>
                <button class="filter-btn" data-filter="guides">Guides pratiques</button>
                <button class="filter-btn" data-filter="partners">Entreprises partenaires</button>
            </div>
            
            <div class="content-grid" id="ressources-grid">
                <!-- Les ressources seront g√©n√©r√©es ici par JavaScript -->
            </div>
        </div>

        <!-- Training (Flo NU) -->
        <div id="training" class="tab-content">
            <h1 class="section-title">TRAINING</h1>
            <p class="section-description">La section training est d√©di√©e √† l'entra√Ænement et √† l'orientation des talents dans leurs domaines professionnels respectifs.</p>
            
            <div class="search-container">
                <select class="filter-dropdown" style="width:100%" id="domain-select">
                    <option value="">S√©lectionner un domaine</option>
                    <option value="droit">Droit</option>
                    <option value="finance">Finance de March√©</option>
                    <option value="consulting">Consulting</option>
                </select>
            </div>
            
            <div class="tertiary-nav">
                <button class="tertiary-tab active" data-tab="revisions">R√©visions</button>
                <button class="tertiary-tab" data-tab="quiz">Quiz</button>
                <button class="tertiary-tab" data-tab="cas">Cas pratiques</button>
                <button class="tertiary-tab" data-tab="ressources-entretiens">Pr√©parer son entretien</button>
            </div>
            
            <!-- Fiches de r√©vision -->
            <div id="revisions" class="tertiary-content active">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Rechercher dans les fiches de r√©vision" id="revision-search">
                    <span class="search-icon">üîç</span>
                </div>
                
                <div class="content-grid" id="revisions-grid">
                    <!-- Les fiches de r√©vision seront g√©n√©r√©es ici par JavaScript -->
                </div>
            </div>
            
            <!-- Quiz d'√©valuation -->
            <div id="quiz" class="tertiary-content" style="display:none">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Rechercher dans les quiz" id="quiz-search">
                    <span class="search-icon">üîç</span>
                </div>
                
                <div id="quiz-list">
                    <!-- Liste des quiz disponibles -->
                    <div class="content-grid" id="quiz-grid">
                        <!-- Les quiz seront g√©n√©r√©s ici par JavaScript -->
                    </div>
                </div>
                
                <!-- Contenu du quiz actif -->
                <div id="active-quiz" style="display:none">
                    <!-- Le quiz actif sera g√©n√©r√© ici par JavaScript -->
                </div>
            </div>
            
            <!-- Cas pratiques -->
            <div id="cas" class="tertiary-content" style="display:none">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Rechercher dans les cas pratiques" id="cas-search">
                    <span class="search-icon">üîç</span>
                </div>
                
                <div class="content-grid" id="cas-grid">
                    <!-- Les cas pratiques seront g√©n√©r√©s ici par JavaScript -->
                </div>
            </div>
            
            <!-- Ressources sur les entretiens -->
            <div id="ressources-entretiens" class="tertiary-content" style="display:none">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Rechercher dans les ressources sur les entretiens" id="entretien-search">
                    <span class="search-icon">üîç</span>
                </div>
                
                <div class="content-grid" id="entretien-grid">
                    <!-- Les ressources sur les entretiens seront g√©n√©r√©es ici par JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Document Viewer -->
    <div class="document-viewer">
        <div class="viewer-header">
            <div class="viewer-title">Document Title</div>
            <div class="close-viewer">‚úï</div>
        </div>
        <iframe class="document-frame" src=""></iframe>
    </div>

    <!-- Int√©gration de PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js" integrity="sha512-ml/QKfG3+Yes6TwOzQb7aCNtJF4PUyha6R3w8pSTo/VJSywl7ZreYvvtUso7fKevpsI+pYVVwnu82YO0q3V6eg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        // Fonction pour initialiser la liseuse PDF
        function initPDFViewer(pdfUrl, containerId) {
            const container = document.getElementById(containerId);

            // Charger le PDF
            pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {
                let currentPage = 1;

                // Fonction pour afficher une page
                const renderPage = (pageNum) => {
                    pdf.getPage(pageNum).then(page => {
                        const scale = 1.5;
                        const viewport = page.getViewport({ scale });

                        // Cr√©er un canvas pour afficher la page
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;

                        // Rendre la page sur le canvas
                        const renderContext = {
                            canvasContext: context,
                            viewport: viewport
                        };
                        page.render(renderContext).promise.then(() => {
                            container.innerHTML = ''; // Nettoyer le conteneur
                            container.appendChild(canvas);
                        });
                    });
                };

                // Afficher la premi√®re page
                renderPage(currentPage);

                // Navigation entre les pages
                const prevButton = document.createElement('button');
                prevButton.textContent = 'Page pr√©c√©dente';
                prevButton.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        renderPage(currentPage);
                    }
                });

                const nextButton = document.createElement('button');
                nextButton.textContent = 'Page suivante';
                nextButton.addEventListener('click', () => {
                    if (currentPage < pdf.numPages) {
                        currentPage++;
                        renderPage(currentPage);
                    }
                });

                // Ajouter les boutons de navigation
                const navigation = document.createElement('div');
                navigation.style.marginTop = '10px';
                navigation.appendChild(prevButton);
                navigation.appendChild(nextButton);
                container.appendChild(navigation);

            }).catch(error => {
                console.error('Erreur lors du chargement du PDF :', error);
                container.innerHTML = '<p>Impossible de charger le PDF.</p>';
            });
        }

        // Emp√™cher le t√©l√©chargement
        document.addEventListener('contextmenu', (e) => e.preventDefault()); // D√©sactiver le clic droit
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && (e.key === 's' || e.key === 'S')) {
                e.preventDefault(); // Emp√™cher Ctrl+S
            }
        });

        // Donn√©es des vid√©os (simul√©es √† partir des informations fournies)
        const videosData = [
            // ... (vos donn√©es existantes)
        ];

        // Donn√©es des ressources entreprises (simul√©es)
        const ressourcesData = [
            // ... (vos donn√©es existantes)
        ];

        // Donn√©es des fiches de r√©vision (simul√©es)
        const revisionsData = [
            // ... (vos donn√©es existantes)
        ];

        // Donn√©es des cas pratiques (simul√©es)
        const casData = [
            // ... (vos donn√©es existantes)
        ];

        // Donn√©es des ressources entretiens (simul√©es)
        const entretienData = [
            // ... (vos donn√©es existantes)
        ];

        // Donn√©es des quiz (extraites des exemples fournis)
        const quizData = [
            // ... (vos donn√©es existantes)
        ];

        // Fonction pour cr√©er un √©l√©ment de vid√©o
        function createVideoElement(video) {
            const tagsHtml = video.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            
            return `
            <div class="content-card" data-type="${video.type}" data-subtype="${video.subtype}" data-tags="${video.tags.join(',')}">
                <div class="card-media">
                    <iframe src="${video.embedUrl}" scrolling="no" allowfullscreen></iframe>
                </div>
                <div class="card-info">
                    <h3 class="card-title">${video.title}</h3>
                    <div class="card-meta">
                        <span>Dur√©e: ${video.duration}</span>
                        <span>Type: ${getTypeLabel(video.type)}</span>
                        <span>Sous-type: ${getSubtypeLabel(video.type, video.subtype)}</span>
                    </div>
                    <p>${video.description}</p>
                    <div class="card-tags">
                        ${tagsHtml}
                    </div>
                </div>
            </div>
            `;
        }

        // Fonction pour obtenir le libell√© du type
        function getTypeLabel(typeValue) {
            const typeMap = {
                "conferences": "Conf√©rences & Webinaire",
                "evenements": "√âv√©nements",
                "clubs": "Clubs Pros",
                "tutoriel": "Tutoriel"
            };
            return typeMap[typeValue] || typeValue;
        }

        // Fonction pour obtenir le libell√© du sous-type
        function getSubtypeLabel(typeValue, subtypeValue) {
            if (!videoSubtypes[typeValue]) return subtypeValue;
            const subtype = videoSubtypes[typeValue].find(s => s.value === subtypeValue);
            return subtype ? subtype.label : subtypeValue;
        }

        // Fonction pour cr√©er un √©l√©ment de document
        function createDocumentElement(doc) {
            const tagsHtml = doc.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            const durationHtml = doc.duration ? `<span>Dur√©e de lecture: ${doc.duration}</span>` : '';
            const domainHtml = doc.domain ? `<span>Domaine: ${doc.domain}</span>` : '';
            
            // D√©terminer si c'est un document inline ou externe
            const isInline = doc.type === 'inline';
            const previewAttributes = isInline 
                ? `data-inline="true" data-content-id="${doc.id}"` 
                : `data-url="${doc.fileUrl}"`;
            
            // Pr√©chargement de l'image pour garantir son affichage
            if (doc.imageUrl) {
                const preloadImage = new Image();
                preloadImage.src = doc.imageUrl;
            }
            
            // V√©rifier si une image personnalis√©e est fournie
            const imageHtml = doc.imageUrl 
                ? `<img src="${doc.imageUrl}" alt="${doc.title}" class="custom-thumbnail">` 
                : `<div class="document-icon-container"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM0RjRGNEYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTQgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjh6Ij48L3BhdGg+PHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiPjwvcG9seWxpbmU+PC9zdmc+" alt="Document" class="default-icon"></div>`;
            
            return `
            <div class="content-card" data-type="${doc.type}" data-category="${doc.category || ''}" data-domain="${doc.domain || ''}" data-tags="${doc.tags.join(',')}">
                <div class="card-media">
                    <div class="document-preview" ${previewAttributes}>
                        ${imageHtml}
                    </div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">${doc.title}</h3>
                    <div class="card-meta">
                        ${durationHtml}
                        ${domainHtml}
                    </div>
                    <p>${doc.description}</p>
                    <div class="card-tags">
                        ${tagsHtml}
                    </div>
                </div>
            </div>
            `;
        }

        // Fonction pour cr√©er un √©l√©ment de quiz
        function createQuizElement(quiz) {
            const tagsHtml = quiz.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            
            return `
            <div class="content-card" data-domain="${quiz.domain}" data-tags="${quiz.tags.join(',')}">
                <div class="card-media">
                    <div class="document-preview" data-quiz-id="${quiz.id}">
                        <div class="document-icon-container">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM0RjRGNEYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCI+PC9jaXJjbGU+PHBhdGggZD0iTTkuMDkgOSBhMyAzIDAgMCAxIDUuODMgMWMwIDItMyAzLTMgM20wIDR2LjAxIj48L3BhdGg+PC9zdmc+" alt="Quiz" class="default-icon">
                        </div>
                    </div>
                </div>
                <div class="card-info">
                    <h3 class="card-title">${quiz.title}</h3>
                    <div class="card-meta">
                        <span>Domaine: ${quiz.domain}</span>
                        <span>Questions: ${quiz.questions.length}</span>
                    </div>
                    <p>${quiz.description}</p>
                    <div class="card-tags">
                        ${tagsHtml}
                    </div>
                </div>
            </div>
            `;
        }

        // Fonction pour g√©n√©rer un quiz actif
        function generateActiveQuiz(quizId) {
            const quiz = quizData.find(q => q.id === quizId);
            if (!quiz) return '';
            
            let questionsHtml = '';
            quiz.questions.forEach((q, index) => {
                let optionsHtml = '';
                q.options.forEach((option, optIndex) => {
                    optionsHtml += `
                    <div class="answer-option" data-index="${optIndex}">
                        <input type="radio" name="question-${index}" id="q${index}-opt${optIndex}">
                        <label for="q${index}-opt${optIndex}">${option}</label>
                    </div>
                    `;
                });
                
                questionsHtml += `
                <div class="quiz-question" data-correct="${q.correctAnswer}">
                    <p class="question-text"><strong>Question ${index + 1}:</strong> ${q.question}</p>
                    <div class="answer-options">
                        ${optionsHtml}
                    </div>
                    <div class="explanation" style="display:none;">
                        <p><strong>Explication:</strong> ${q.explanation}</p>
                    </div>
                </div>
                `;
            });
            
            return `
            <div class="quiz-container">
                <h2 class="quiz-title">${quiz.title}</h2>
                <div class="quiz-questions">
                    ${questionsHtml}
                </div>
                <div class="quiz-actions">
                    <button class="quiz-btn" id="back-to-quizzes">Retour aux quiz</button>
                    <button class="quiz-btn" id="validate-quiz">Valider les r√©ponses</button>
                </div>
            </div>
            `;
        }

        // Fonction pour initialiser la vid√©oth√®que
        function initVideotheque() {
            const videosGrid = document.getElementById('videos-grid');
            videosGrid.innerHTML = '';
            
            videosData.forEach(video => {
                videosGrid.innerHTML += createVideoElement(video);
            });
        }

        // Fonction pour initialiser les ressources
        function initRessources() {
            const ressourcesGrid = document.getElementById('ressources-grid');
            ressourcesGrid.innerHTML = '';
            
            ressourcesData.forEach(doc => {
                ressourcesGrid.innerHTML += createDocumentElement(doc);
            });
        }

        // Fonction pour initialiser les fiches de r√©vision
        function initRevisions() {
            const revisionsGrid = document.getElementById('revisions-grid');
            revisionsGrid.innerHTML = '';
            
            revisionsData.forEach(doc => {
                revisionsGrid.innerHTML += createDocumentElement(doc);
            });
        }

        // Fonction pour initialiser les cas pratiques
        function initCas() {
            const casGrid = document.getElementById('cas-grid');
            casGrid.innerHTML = '';
            
            casData.forEach(doc => {
                casGrid.innerHTML += createDocumentElement(doc);
            });
        }

        // Fonction pour initialiser les ressources sur les entretiens
        function initEntretienRessources() {
            const entretienGrid = document.getElementById('entretien-grid');
            entretienGrid.innerHTML = '';
            
            entretienData.forEach(doc => {
                entretienGrid.innerHTML += createDocumentElement(doc);
            });
        }

        // Fonction pour initialiser les quiz
        function initQuiz() {
            const quizGrid = document.getElementById('quiz-grid');
            quizGrid.innerHTML = '';
            
            quizData.forEach(quiz => {
                quizGrid.innerHTML += createQuizElement(quiz);
            });
        }

        // Fonction pour initialiser les entretiens blancs
        /* Supprim√© */

        // Fonction pour mettre √† jour les sous-types de vid√©os en fonction du type s√©lectionn√©
        function updateVideoSubtypes() {
            // Cette fonction est d√©sactiv√©e car toutes les cat√©gories sont maintenant affich√©es en permanence
            // Le code reste ici pour r√©f√©rence ou utilisation future
            /*
            const typeSelect = document.getElementById('type-filter');
            const subtypeSelect = document.getElementById('subtype-filter');
            const selectedType = typeSelect.value;
            
            subtypeSelect.innerHTML = '<option value="">Cat√©gorie</option>';
            
            if (selectedType && videoSubtypes[selectedType]) {
                videoSubtypes[selectedType].forEach(sub => {
                    subtypeSelect.innerHTML += `<option value="${sub.value}">${sub.label}</option>`;
                });
            }
            */
        }
        
        // Fonction pour mettre √† jour les sous-domaines en fonction du domaine s√©lectionn√©
        function updateSubdomains() {
            const domainSelect = document.getElementById('domain-booking');
            const subdomainSelect = document.getElementById('subdomain-booking');
            const selectedDomain = domainSelect.value;
            
            subdomainSelect.innerHTML = '<option value="">S√©lectionner un sous-domaine</option>';
            
            if (selectedDomain && subdomains[selectedDomain]) {
                subdomains[selectedDomain].forEach(sub => {
                    subdomainSelect.innerHTML += `<option value="${sub.value}">${sub.label}</option>`;
                });
            }
        }

        // Fonction pour filtrer les vid√©os
        function filterVideos() {
            const searchTerm = document.getElementById('video-search').value.toLowerCase();
            const typeFilter = document.getElementById('type-filter').value;
            const subtypeFilter = document.getElementById('subtype-filter').value;
            const durationFilter = document.getElementById('duration-filter').value;
            const tagFilter = document.getElementById('tag-filter').value;
            
            const videos = document.querySelectorAll('#videos-grid .content-card');
            
            videos.forEach(video => {
                const title = video.querySelector('.card-title').textContent.toLowerCase();
                const description = video.querySelector('p').textContent.toLowerCase();
                const videoType = video.getAttribute('data-type');
                const videoSubtype = video.getAttribute('data-subtype');
                const tags = video.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec le type
                const matchesType = !typeFilter || videoType === typeFilter;
                
                // V√©rifier la correspondance avec le sous-type
                const matchesSubtype = !subtypeFilter || videoSubtype === subtypeFilter;
                
                // V√©rifier la correspondance avec le tag
                const matchesTag = !tagFilter || tags.includes(tagFilter);
                
                // V√©rifier la correspondance avec la dur√©e (simulation)
                const matchesDuration = !durationFilter || true; // √Ä compl√©ter avec la logique de dur√©e
                
                // Afficher ou masquer la vid√©o
                if (matchesSearch && matchesType && matchesSubtype && matchesTag && matchesDuration) {
                    video.style.display = 'block';
                } else {
                    video.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les ressources
        function filterRessources() {
            const searchTerm = document.getElementById('ressource-search').value.toLowerCase();
            const categoryFilter = document.querySelector('#ressources .filters .filter-btn.active').getAttribute('data-filter');
            
            const resources = document.querySelectorAll('#ressources-grid .content-card');
            
            resources.forEach(resource => {
                const title = resource.querySelector('.card-title').textContent.toLowerCase();
                const description = resource.querySelector('p').textContent.toLowerCase();
                const category = resource.getAttribute('data-category');
                const tags = resource.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec la cat√©gorie
                const matchesCategory = categoryFilter === 'all' || category === categoryFilter;
                
                // Afficher ou masquer la ressource
                if (matchesSearch && matchesCategory) {
                    resource.style.display = 'block';
                } else {
                    resource.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les fiches de r√©vision
        function filterRevisions() {
            const searchTerm = document.getElementById('revision-search').value.toLowerCase();
            const domainFilter = document.getElementById('domain-select').value;
            
            const revisions = document.querySelectorAll('#revisions-grid .content-card');
            
            revisions.forEach(revision => {
                const title = revision.querySelector('.card-title').textContent.toLowerCase();
                const description = revision.querySelector('p').textContent.toLowerCase();
                const domain = revision.getAttribute('data-domain');
                const tags = revision.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec le domaine
                const matchesDomain = !domainFilter || domain === domainFilter;
                
                // Afficher ou masquer la fiche
                if (matchesSearch && matchesDomain) {
                    revision.style.display = 'block';
                } else {
                    revision.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les quiz
        function filterQuizzes() {
            const searchTerm = document.getElementById('quiz-search').value.toLowerCase();
            const domainFilter = document.getElementById('domain-select').value;
            
            const quizzes = document.querySelectorAll('#quiz-grid .content-card');
            
            quizzes.forEach(quiz => {
                const title = quiz.querySelector('.card-title').textContent.toLowerCase();
                const description = quiz.querySelector('p').textContent.toLowerCase();
                const domain = quiz.getAttribute('data-domain');
                const tags = quiz.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec le domaine
                const matchesDomain = !domainFilter || domain === domainFilter;
                
                // Afficher ou masquer le quiz
                if (matchesSearch && matchesDomain) {
                    quiz.style.display = 'block';
                } else {
                    quiz.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les cas pratiques
        function filterCas() {
            const searchTerm = document.getElementById('cas-search').value.toLowerCase();
            const domainFilter = document.getElementById('domain-select').value;
            
            const casPratiques = document.querySelectorAll('#cas-grid .content-card');
            
            casPratiques.forEach(cas => {
                const title = cas.querySelector('.card-title').textContent.toLowerCase();
                const description = cas.querySelector('p').textContent.toLowerCase();
                const domain = cas.getAttribute('data-domain');
                const tags = cas.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec le domaine
                const matchesDomain = !domainFilter || domain === domainFilter;
                
                // Afficher ou masquer le cas
                if (matchesSearch && matchesDomain) {
                    cas.style.display = 'block';
                } else {
                    cas.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les ressources d'entretien
        function filterEntretienRessources() {
            const searchTerm = document.getElementById('entretien-search').value.toLowerCase();
            const domainFilter = document.getElementById('domain-select').value;
            
            const ressources = document.querySelectorAll('#entretien-grid .content-card');
            
            ressources.forEach(ressource => {
                const title = ressource.querySelector('.card-title').textContent.toLowerCase();
                const description = ressource.querySelector('p').textContent.toLowerCase();
                const domain = ressource.getAttribute('data-domain');
                const tags = ressource.getAttribute('data-tags').split(',');
                
                // V√©rifier la correspondance avec la recherche
                const matchesSearch = !searchTerm || 
                                     title.includes(searchTerm) || 
                                     description.includes(searchTerm) || 
                                     tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // V√©rifier la correspondance avec le domaine
                const matchesDomain = !domainFilter || domain === domainFilter;
                
                // Afficher ou masquer la ressource
                if (matchesSearch && matchesDomain) {
                    ressource.style.display = 'block';
                } else {
                    ressource.style.display = 'none';
                }
            });
        }

        // Fonction pour filtrer les entretiens blancs
        /* Supprim√© */

        // Fonction pour initialiser tous les √©l√©ments
        function initAll() {
            initVideotheque();
            initRessources();
            initRevisions();
            initCas();
            initEntretienRessources();
            initQuiz();
            
            // Attacher les √©v√©nements
            attachEvents();
        }

        // Fonction pour attacher les √©v√©nements
        function attachEvents() {
            // Navigation principale
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Mettre √† jour les onglets actifs
                    document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Afficher le contenu correspondant
                    const tabId = this.getAttribute('data-tab');
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Navigation tertiaire (Flo NU)
            document.querySelectorAll('.tertiary-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Mettre √† jour les onglets actifs
                    document.querySelectorAll('.tertiary-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Afficher le contenu correspondant
                    const tabId = this.getAttribute('data-tab');
                    document.querySelectorAll('.tertiary-content').forEach(content => content.style.display = 'none');
                    document.getElementById(tabId).style.display = 'block';
                });
            });
            
            // Filtres vid√©oth√®que
            document.getElementById('video-search').addEventListener('input', filterVideos);
            document.getElementById('type-filter').addEventListener('change', filterVideos);
            document.getElementById('subtype-filter').addEventListener('change', filterVideos);
            document.getElementById('duration-filter').addEventListener('change', filterVideos);
            document.getElementById('tag-filter').addEventListener('change', filterVideos);
            
            // Filtres ressources
            document.getElementById('ressource-search').addEventListener('input', filterRessources);
            document.querySelectorAll('#ressources .filters .filter-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('#ressources .filters .filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterRessources();
                });
            });
            
            // Filtres fiches de r√©vision
            document.getElementById('revision-search').addEventListener('input', filterRevisions);
            document.getElementById('domain-select').addEventListener('change', function() {
                filterRevisions();
                filterQuizzes();
                filterCas();
                filterEntretienRessources();
            });
            
            // Filtres quiz
            document.getElementById('quiz-search').addEventListener('input', filterQuizzes);
            
            // Filtres cas pratiques
            document.getElementById('cas-search').addEventListener('input', filterCas);
            
            // Filtres ressources entretiens
            document.getElementById('entretien-search').addEventListener('input', filterEntretienRessources);
            
            // Pr√©visualisation des documents
            document.addEventListener('click', function(e) {
                if (e.target.closest('.document-preview')) {
                    const preview = e.target.closest('.document-preview');
                    
                    // V√©rifier s'il s'agit d'un quiz
                    if (preview.hasAttribute('data-quiz-id')) {
                        const quizId = parseInt(preview.getAttribute('data-quiz-id'));
                        document.getElementById('quiz-list').style.display = 'none';
                        document.getElementById('active-quiz').style.display = 'block';
                        document.getElementById('active-quiz').innerHTML = generateActiveQuiz(quizId);
                        
                        // Attacher les √©v√©nements du quiz
                        document.getElementById('back-to-quizzes').addEventListener('click', function() {
                            document.getElementById('quiz-list').style.display = 'block';
                            document.getElementById('active-quiz').style.display = 'none';
                        });
                        
                        document.getElementById('validate-quiz').addEventListener('click', function() {
                            validateQuiz();
                        });
                        
                        // Attacher les √©v√©nements de s√©lection des r√©ponses
                        document.querySelectorAll('.answer-option').forEach(option => {
                            option.addEventListener('click', function() {
                                const question = this.closest('.quiz-question');
                                question.querySelectorAll('.answer-option').forEach(opt => opt.classList.remove('selected'));
                                this.classList.add('selected');
                            });
                        });
                    } else if (preview.hasAttribute('data-inline')) {
                        // Traiter le contenu inline
                        const contentId = preview.getAttribute('data-content-id');
                        const docItem = casData.find(item => item.id == contentId);
                        
                        if (docItem) {
                            const title = docItem.title;
                            const content = docItem.content;
                            
                            document.querySelector('.document-viewer .viewer-title').textContent = title;
                            document.querySelector('.document-content').innerHTML = content;
                            document.querySelector('.document-content').style.display = 'block';
                            document.querySelector('.document-frame').style.display = 'none';
                            document.querySelector('.document-viewer').classList.add('active');
                            
                            // Initialiser le bouton toggle pour la solution (s'il existe)
                            setTimeout(function() {
                                const toggleButton = document.getElementById('toggleSolution');
                                if (toggleButton) {
                                    toggleButton.addEventListener('click', function() {
                                        const solutionContent = document.getElementById('solutionContent');
                                        if (solutionContent.style.display === 'none') {
                                            solutionContent.style.display = 'block';
                                            toggleButton.textContent = 'Masquer la solution indicative';
                                        } else {
                                            solutionContent.style.display = 'none';
                                            toggleButton.textContent = 'Afficher la solution indicative';
                                        }
                                    });
                                }
                            }, 100);
                        }
                    } else {
                        // Ouvrir la visionneuse de document
                        const fileUrl = preview.getAttribute('data-url');
                        const title = preview.closest('.content-card').querySelector('.card-title').textContent;
                        
                        if (fileUrl.endsWith('.pdf')) {
                            // Afficher la liseuse PDF
                            document.querySelector('.document-viewer .viewer-title').textContent = title;
                            document.querySelector('.document-content').style.display = 'none';
                            document.querySelector('.document-frame').style.display = 'none';
                            document.querySelector('.document-viewer').classList.add('active');

                            // Initialiser la liseuse PDF
                            const pdfContainer = document.createElement('div');
                            pdfContainer.id = 'pdf-viewer-container';
                            pdfContainer.style.width = '100%';
                            pdfContainer.style.height = '80vh';
                            document.querySelector('.document-viewer').appendChild(pdfContainer);
                            initPDFViewer(fileUrl, 'pdf-viewer-container');
                        } else {
                            // Afficher d'autres types de documents
                            document.querySelector('.document-viewer .viewer-title').textContent = title;
                            document.querySelector('.document-frame').src = fileUrl;
                            document.querySelector('.document-content').style.display = 'none';
                            document.querySelector('.document-frame').style.display = 'block';
                            document.querySelector('.document-viewer').classList.add('active');
                        }
                    }
                }
            });
            
            // Fermer la visionneuse de document
            document.querySelector('.close-viewer').addEventListener('click', function() {
                document.querySelector('.document-viewer').classList.remove('active');
                document.querySelector('.document-frame').src = '';
                document.querySelector('.document-content').style.display = 'none';
                const pdfContainer = document.getElementById('pdf-viewer-container');
                if (pdfContainer) {
                    pdfContainer.remove();
                }
            });
            
            // Validation du quiz
            document.addEventListener('click', function(e) {
                if (e.target.id === 'validate-quiz') {
                    validateQuiz();
                }
            });
            
            // R√©servation d'entretien
            /* Supprim√© */
        }
        
        // Fonction pour valider un quiz
        function validateQuiz() {
            const questions = document.querySelectorAll('.quiz-question');
            let score = 0;
            
            questions.forEach(question => {
                const correctIndex = parseInt(question.getAttribute('data-correct'));
                const selectedOption = question.querySelector('.answer-option.selected');
                
                // R√©initialiser les classes
                question.querySelectorAll('.answer-option').forEach(option => {
                    option.classList.remove('correct', 'incorrect');
                });
                
                // Marquer la bonne r√©ponse
                question.querySelectorAll('.answer-option')[correctIndex].classList.add('correct');
                
                // V√©rifier si une r√©ponse a √©t√© s√©lectionn√©e et si elle est correcte
                if (selectedOption) {
                    const selectedIndex = parseInt(selectedOption.getAttribute('data-index'));
                    
                    if (selectedIndex === correctIndex) {
                        score++;
                    } else {
                        selectedOption.classList.add('incorrect');
                    }
                }
                
                // Afficher l'explication
                question.querySelector('.explanation').style.display = 'block';
            });
            
            // Calculer le pourcentage
            const percentage = Math.round((score / questions.length) * 100);
            
            // Ajouter le r√©sultat
            let feedback = '';
            if (percentage >= 80) {
                feedback = 'Excellent ! Vous ma√Ætrisez bien le sujet.';
            } else if (percentage >= 60) {
                feedback = 'Bon travail ! Quelques r√©visions suppl√©mentaires seraient b√©n√©fiques.';
            } else {
                feedback = 'Des r√©visions sont n√©cessaires pour mieux comprendre ce sujet.';
            }
            
            const resultHtml = `
            <div class="quiz-result" style="margin-top: 2rem; padding: 1rem; background-color: #F5F5F5; border-radius: 4px;">
                <h3>R√©sultat: ${score}/${questions.length} (${percentage}%)</h3>
                <p>${feedback}</p>
            </div>
            `;
            
            // Ajouter le r√©sultat au quiz
            if (!document.querySelector('.quiz-result')) {
                document.querySelector('.quiz-questions').insertAdjacentHTML('afterend', resultHtml);
            } else {
                document.querySelector('.quiz-result').outerHTML = resultHtml;
            }
            
            // D√©sactiver le bouton de validation
            document.getElementById('validate-quiz').disabled = true;
        }
        
        // Initialiser tout au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            initAll();
            
            // Initialiser la visionneuse de document
            if (!document.querySelector('.document-viewer .document-content')) {
                const documentViewer = document.querySelector('.document-viewer');
                const documentContent = document.createElement('div');
                documentContent.className = 'document-content';
                documentViewer.insertBefore(documentContent, document.querySelector('.document-frame'));
            }
        });
    </script>
</body>
</html>
