// pages/index.js
import { useState, useEffect } from 'react';
import Head from 'next/head';
import MainTabs from '../components/MainTabs';
import Videotheque from '../components/Videotheque';
import RessourcesEntreprises from '../components/RessourcesEntreprises';
import FloNU from '../components/FloNU';

export default function Home() {
  const [activeTab, setActiveTab] = useState('videotheque');

  const handleTabChange = (tab) => {
    setActiveTab(tab);
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <Head>
        <title>Fondation Florence - Ressources</title>
        <meta name="description" content="Plateforme de ressources pour les talents" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="container mx-auto px-4 py-6">
        <MainTabs activeTab={activeTab} onTabChange={handleTabChange} />
        
        {activeTab === 'videotheque' && <Videotheque />}
        {activeTab === 'ressources' && <RessourcesEntreprises />}
        {activeTab === 'flonu' && <FloNU />}
      </main>
    </div>
  );
}

// components/MainTabs.js
export default function MainTabs({ activeTab, onTabChange }) {
  return (
    <div className="border-b border-gray-200 mb-6">
      <div className="flex justify-center">
        <nav className="flex space-x-8">
          <button
            onClick={() => onTabChange('videotheque')}
            className={`py-4 px-1 border-b-2 font-medium text-sm ${
              activeTab === 'videotheque'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
            }`}
          >
            VIDEOS
          </button>
          <button
            onClick={() => onTabChange('flonu')}
            className={`py-4 px-1 border-b-2 font-medium text-sm ${
              activeTab === 'flonu'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
            }`}
          >
            TRAINING
          </button>
          <button
            onClick={() => onTabChange('ressources')}
            className={`py-4 px-1 border-b-2 font-medium text-sm ${
              activeTab === 'ressources'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
            }`}
          >
            RESSOURCES
          </button>
        </nav>
      </div>
    </div>
  );
}

// components/SearchBar.js
export default function SearchBar({ placeholder, onSearch }) {
  const [query, setQuery] = useState('');

  const handleSearch = (e) => {
    e.preventDefault();
    onSearch(query);
  };

  return (
    <div className="relative mb-6">
      <form onSubmit={handleSearch} className="flex w-full">
        <input
          type="text"
          placeholder={placeholder}
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          className="w-full px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500"
        />
        <button
          type="submit"
          className="bg-white border border-l-0 border-gray-300 rounded-r-md px-4 flex items-center justify-center"
        >
          <svg
            className="h-5 w-5 text-gray-400"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fillRule="evenodd"
              d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
              clipRule="evenodd"
            />
          </svg>
        </button>
      </form>
    </div>
  );
}

// components/Videotheque.js
import { useState, useEffect } from 'react';
import SearchBar from './SearchBar';

export default function Videotheque() {
  const [videos, setVideos] = useState([]);
  const [filteredVideos, setFilteredVideos] = useState([]);
  const [selectedType, setSelectedType] = useState('');
  const [selectedDuration, setSelectedDuration] = useState('');
  const [selectedTags, setSelectedTags] = useState([]);

  // Types de vidéos
  const videoTypes = [
    { 
      id: 'conferences', 
      name: 'Conférences & Webinaire',
      subtypes: ['Club Diplo', 'Femmes de Florence', 'Pizz\'Art', 'Webinaires']
    },
    { 
      id: 'evenements', 
      name: 'Événements',
      subtypes: ['Soirée', 'Sport', 'Éloquence']
    },
    { 
      id: 'clubs', 
      name: 'Clubs Pros',
      subtypes: ['InvestClub', 'Club de Négo', 'Stem Club', 'Club des cracks']
    },
    { 
      id: 'tutoriels', 
      name: 'Tutoriel',
      subtypes: ['Talent', 'Mentor', 'Supra']
    },
  ];

  // Liste des tags disponibles
  const availableTags = [
    'Finance', 'Droit', 'Entrepreneuriat', 'Conseil', 'Coaching',
    'RH', 'Politique', 'International', 'Art et Culture'
  ];

  // Données factices de vidéos
  useEffect(() => {
    // Simulons une récupération de données
    const mockVideos = [
      {
        id: 1,
        title: 'Webinaire Fondation Florence — Fanny Letier',
        type: 'conferences',
        subtype: 'Webinaires',
        duration: '1h15min',
        tags: ['Finance', 'Entrepreneuriat'],
        description: 'Fanny Letier partage son expérience et ses conseils sur l\'entrepreneuriat et l\'investissement.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057571258?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="Club Gastronomique 2"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 2,
        title: 'Webinaire Fondation Florence - François Paillier',
        type: 'conferences',
        subtype: 'Webinaires',
        duration: '45min',
        tags: ['Finance', 'Conseil', 'RH'],
        description: 'François Paillier présente les défis et opportunités du secteur financier.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057568379?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="expositions_origines_vdef"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 3,
        title: 'Conférence Anti-Racisme',
        type: 'evenements',
        subtype: 'Éloquence',
        duration: '2h00',
        tags: ['Politique', 'International', 'Art et Culture'],
        description: 'Conférence sur la lutte contre le racisme et les discriminations.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057567291?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="film_antirascisme"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 4,
        title: 'Programme École 100',
        type: 'tutoriels',
        subtype: 'Talent',
        duration: '30min',
        tags: ['Coaching', 'RH', 'Art et Culture'],
        description: 'Présentation du programme École 100 pour les talents.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057559485?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="ecole_100"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 5,
        title: 'Programme Talent 100',
        type: 'tutoriels',
        subtype: 'Talent',
        duration: '25min',
        tags: ['Entrepreneuriat', 'Coaching'],
        description: 'Présentation détaillée du programme Talent 100.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057505542?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="Talent_100"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 6,
        title: 'Devenir Mentor',
        type: 'tutoriels',
        subtype: 'Mentor',
        duration: '40min',
        tags: ['RH', 'Coaching'],
        description: 'Guide pour devenir mentor au sein de la Fondation Florence.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057565997?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="mentorsv2"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      },
      {
        id: 7,
        title: 'Entreprise 100',
        type: 'clubs',
        subtype: 'Club de Négo',
        duration: '50min',
        tags: ['Entrepreneuriat', 'Finance'],
        description: 'Présentation du programme Entreprise 100 pour les entrepreneurs.',
        vimeoCode: '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/1057561289?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="entreprise_100"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>'
      }
    ];
    
    setVideos(mockVideos);
    setFilteredVideos(mockVideos);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredVideos(videos);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = videos.filter(video => {
      // Recherche dans le titre
      if (video.title.toLowerCase().includes(lowerQuery)) return true;
      
      // Recherche dans la description
      if (video.description.toLowerCase().includes(lowerQuery)) return true;
      
      // Recherche dans les tags
      if (video.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      
      return false;
    });
    
    setFilteredVideos(results);
  };

  const handleTypeFilter = (type) => {
    setSelectedType(type);
    filterVideos(type, selectedDuration, selectedTags);
  };

  const handleDurationFilter = (duration) => {
    setSelectedDuration(duration);
    filterVideos(selectedType, duration, selectedTags);
  };

  const handleTagToggle = (tag) => {
    const updatedTags = selectedTags.includes(tag)
      ? selectedTags.filter(t => t !== tag)
      : [...selectedTags, tag];
    
    setSelectedTags(updatedTags);
    filterVideos(selectedType, selectedDuration, updatedTags);
  };

  const filterVideos = (type, duration, tags) => {
    let results = [...videos];
    
    if (type) {
      results = results.filter(video => video.type === type);
    }
    
    if (duration) {
      // Exemple de filtrage par durée (à adapter selon vos besoins)
      if (duration === 'short') {
        results = results.filter(video => {
          const minutes = parseInt(video.duration.match(/(\d+)min/)[1]);
          return minutes <= 30;
        });
      } else if (duration === 'medium') {
        results = results.filter(video => {
          const minutes = parseInt(video.duration.match(/(\d+)min/)[1]);
          return minutes > 30 && minutes <= 60;
        });
      } else if (duration === 'long') {
        results = results.filter(video => {
          const minutes = parseInt(video.duration.match(/(\d+)min/)[1]);
          return minutes > 60;
        });
      }
    }
    
    if (tags.length > 0) {
      results = results.filter(video => 
        tags.some(tag => video.tags.includes(tag))
      );
    }
    
    setFilteredVideos(results);
  };

  return (
    <div>
      <div className="text-center mb-8">
        <h1 className="text-2xl font-bold uppercase">VIDÉOTHÈQUE</h1>
        <p className="text-gray-600">
          La vidéothèque regroupe l'ensemble des vidéos et des podcasts enregistrés lors des webinaires organisés par Florence.
        </p>
      </div>

      <SearchBar placeholder="Rechercher dans la vidéothèque" onSearch={handleSearch} />

      <div className="flex flex-wrap gap-4 mb-6">
        <div>
          <select 
            className="px-4 py-2 border border-gray-300 rounded-md"
            onChange={(e) => handleTypeFilter(e.target.value)}
            value={selectedType}
          >
            <option value="">Types</option>
            {videoTypes.map(type => (
              <option key={type.id} value={type.id}>{type.name}</option>
            ))}
          </select>
        </div>
        
        <div>
          <select 
            className="px-4 py-2 border border-gray-300 rounded-md"
            onChange={(e) => handleDurationFilter(e.target.value)}
            value={selectedDuration}
          >
            <option value="">Durée</option>
            <option value="short">Moins de 30min</option>
            <option value="medium">30min - 1h</option>
            <option value="long">Plus d'1h</option>
          </select>
        </div>
        
        <div>
          <select 
            className="px-4 py-2 border border-gray-300 rounded-md"
            onChange={(e) => handleTagToggle(e.target.value)}
            value=""
          >
            <option value="">Tags</option>
            {availableTags.map(tag => (
              <option key={tag} value={tag}>{tag}</option>
            ))}
          </select>
        </div>
      </div>

      {selectedTags.length > 0 && (
        <div className="flex flex-wrap gap-2 mb-6">
          {selectedTags.map(tag => (
            <div key={tag} className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center">
              {tag}
              <button onClick={() => handleTagToggle(tag)} className="ml-2">
                <svg className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          ))}
        </div>
      )}

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredVideos.map(video => (
          <div key={video.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-0" dangerouslySetInnerHTML={{ __html: video.vimeoCode }} />
            <div className="p-4">
              <h3 className="text-lg font-semibold mb-2">{video.title}</h3>
              <div className="flex gap-2 mb-2">
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  {video.duration}
                </span>
                {video.tags.map(tag => (
                  <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <p className="text-gray-600 text-sm">{video.description}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// components/RessourcesEntreprises.js
import { useState, useEffect } from 'react';
import SearchBar from './SearchBar';

export default function RessourcesEntreprises() {
  const [documents, setDocuments] = useState([]);
  const [filteredDocuments, setFilteredDocuments] = useState([]);
  const [selectedEntreprise, setSelectedEntreprise] = useState('');
  const [openDocument, setOpenDocument] = useState(null);

  // Données factices de documents d'entreprises
  useEffect(() => {
    const mockDocuments = [
      {
        id: 1,
        title: 'Présentation de la Fondation Florence',
        entreprise: 'Fondation Florence',
        url: 'https://fondationflorence.my.salesforce.com/sfc/p/07000000ZXDA/a/Jv000008dV0v/0TMCzmlen00i_Qo_I.QsMC.TuDGY3FjaoAWbNLnAVwY',
        tags: ['présentation', 'mission', 'fondation']
      },
      {
        id: 2,
        title: 'Guide du mentorat',
        entreprise: 'Fondation Florence',
        url: 'https://engagement-guide-du-supr-rebzrbp.gamma.site/',
        tags: ['mentorat', 'guide', 'accompagnement']
      },
      {
        id: 3,
        title: 'Partenariat KPMG',
        entreprise: 'KPMG',
        url: 'https://florence-mentorship-cd8wzmm.gamma.site/copy-of-engagement-guide',
        tags: ['kpmg', 'partenariat', 'audit']
      }
    ];
    
    setDocuments(mockDocuments);
    setFilteredDocuments(mockDocuments);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredDocuments(documents);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = documents.filter(doc => {
      if (doc.title.toLowerCase().includes(lowerQuery)) return true;
      if (doc.entreprise.toLowerCase().includes(lowerQuery)) return true;
      if (doc.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      
      return false;
    });
    
    setFilteredDocuments(results);
  };

  const handleEntrepriseFilter = (entreprise) => {
    setSelectedEntreprise(entreprise);
    
    if (!entreprise) {
      setFilteredDocuments(documents);
      return;
    }
    
    const results = documents.filter(doc => doc.entreprise === entreprise);
    setFilteredDocuments(results);
  };

  const openDocumentViewer = (doc) => {
    setOpenDocument(doc);
  };

  const closeDocumentViewer = () => {
    setOpenDocument(null);
  };

  // Extraire la liste des entreprises uniques
  const entreprises = [...new Set(documents.map(doc => doc.entreprise))];

  return (
    <div>
      <div className="text-center mb-8">
        <h1 className="text-2xl font-bold uppercase">RESSOURCES</h1>
        <p className="text-gray-600">
          Cette section contient tous les documents essentiels au fonctionnement de la fondation Florence et à l'information des talents.
        </p>
      </div>

      <SearchBar placeholder="Rechercher dans les ressources" onSearch={handleSearch} />

      <div className="flex mb-6 overflow-x-auto space-x-2">
        <button
          onClick={() => handleEntrepriseFilter('')}
          className={`px-4 py-2 rounded-md ${
            selectedEntreprise === '' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
          }`}
        >
          Tous
        </button>
        <button
          onClick={() => handleEntrepriseFilter('Fondation Florence')}
          className={`px-4 py-2 rounded-md ${
            selectedEntreprise === 'Fondation Florence' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
          }`}
        >
          À propos de Florence
        </button>
        <button
          onClick={() => handleEntrepriseFilter('Guides')}
          className={`px-4 py-2 rounded-md ${
            selectedEntreprise === 'Guides' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
          }`}
        >
          Guides pratiques
        </button>
        <button
          onClick={() => handleEntrepriseFilter('KPMG')}
          className={`px-4 py-2 rounded-md whitespace-nowrap ${
            selectedEntreprise === 'KPMG' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
          }`}
        >
          Entreprises partenaires
        </button>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredDocuments.map(doc => (
          <div key={doc.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-6 flex flex-col items-center">
              <div className="w-16 h-16 bg-gray-200 rounded flex items-center justify-center mb-4">
                <svg className="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 className="text-lg font-semibold mb-2 text-center">{doc.title}</h3>
              <p className="text-sm text-gray-600 mb-4">
                {doc.entreprise}
              </p>
              <div className="flex gap-2 flex-wrap justify-center mb-4">
                {doc.tags.map(tag => (
                  <span key={tag} className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <button
                onClick={() => openDocumentViewer(doc)}
                className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
              >
                Consulter
              </button>
            </div>
          </div>
        ))}
      </div>

      {openDocument && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg overflow-hidden w-full max-w-4xl max-h-screen flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="font-bold">{openDocument.title}</h3>
              <button onClick={closeDocumentViewer} className="text-gray-500 hover:text-gray-700">
                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            <div className="flex-grow overflow-hidden">
              <iframe 
                src={openDocument.url} 
                className="w-full h-full"
                style={{ minHeight: '80vh' }}
                title={openDocument.title}
              />
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// components/FloNU.js
import { useState } from 'react';
import FichesRevision from './FloNU/FichesRevision';
import QuizEvaluation from './FloNU/QuizEvaluation';
import CasPratiques from './FloNU/CasPratiques';
import RessourcesEntretiens from './FloNU/RessourcesEntretiens';

export default function FloNU() {
  const [activeSubTab, setActiveSubTab] = useState('fiches');

  return (
    <div>
      <div className="text-center mb-8">
        <h1 className="text-2xl font-bold uppercase">TRAINING</h1>
        <p className="text-gray-600">
          La section training est dédiée à l'entraînement et à l'orientation des talents dans leurs domaines professionnels respectifs.
        </p>
      </div>

      <div className="mb-6">
        <select 
          className="w-full px-4 py-2 border border-gray-300 rounded-md mb-6"
          value="default"
        >
          <option value="default">Sélectionner un domaine</option>
          <option value="droit">Droit</option>
          <option value="finance">Finance de Marché</option>
          <option value="consulting">Consulting</option>
        </select>

        <div className="flex mb-6 overflow-x-auto space-x-2">
          <button
            onClick={() => setActiveSubTab('fiches')}
            className={`px-4 py-2 rounded-md ${
              activeSubTab === 'fiches' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
            }`}
          >
            Révisions
          </button>
          <button
            onClick={() => setActiveSubTab('quiz')}
            className={`px-4 py-2 rounded-md ${
              activeSubTab === 'quiz' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
            }`}
          >
            Quiz
          </button>
          <button
            onClick={() => setActiveSubTab('cas')}
            className={`px-4 py-2 rounded-md ${
              activeSubTab === 'cas' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
            }`}
          >
            Cas pratiques
          </button>
          <button
            onClick={() => setActiveSubTab('entretiens')}
            className={`px-4 py-2 rounded-md ${
              activeSubTab === 'entretiens' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'
            }`}
          >
            Préparer son entretien
          </button>
        </div>
      </div>

      {activeSubTab === 'fiches' && <FichesRevision />}
      {activeSubTab === 'quiz' && <QuizEvaluation />}
      {activeSubTab === 'cas' && <CasPratiques />}
      {activeSubTab === 'entretiens' && <RessourcesEntretiens />}
    </div>
  );
}

// components/FloNU/FichesRevision.js
import { useState, useEffect } from 'react';
import SearchBar from '../SearchBar';

export default function FichesRevision() {
  const [fiches, setFiches] = useState([]);
  const [filteredFiches, setFilteredFiches] = useState([]);
  const [openFiche, setOpenFiche] = useState(null);
  
  useEffect(() => {
    // Données factices de fiches de révision
    const mockFiches = [
      {
        id: 1,
        title: 'Les fondamentaux du droit des sociétés',
        duration: '20min',
        domaine: 'droit',
        tags: ['droit', 'sociétés', 'fondamentaux'],
        resume: 'Fiche synthétique sur les fondamentaux du droit des sociétés.',
        url: 'https://fondationflorence.my.salesforce.com/sfc/p/07000000ZXDA/a/Jv000008dV0v/0TMCzmlen00i_Qo_I.QsMC.TuDGY3FjaoAWbNLnAVwY'
      },
      {
        id: 2,
        title: 'Introduction aux produits dérivés',
        duration: '25min',
        domaine: 'finance',
        tags: ['finance', 'dérivés', 'marchés'],
        resume: 'Fiche de révision sur les produits dérivés et leur fonctionnement.',
        url: 'https://engagement-guide-du-supr-rebzrbp.gamma.site/'
      },
      {
        id: 3,
        title: 'Méthodologie de résolution de cas en consulting',
        duration: '30min',
        domaine: 'consulting',
        tags: ['consulting', 'méthodologie', 'cas'],
        resume: 'Méthodologie et framework pour résoudre des cas de consulting.',
        url: 'https://florence-mentorship-cd8wzmm.gamma.site/copy-of-engagement-guide'
      }
    ];
    
    setFiches(mockFiches);
    setFilteredFiches(mockFiches);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredFiches(fiches);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = fiches.filter(fiche => {
      if (fiche.title.toLowerCase().includes(lowerQuery)) return true;
      if (fiche.domaine.toLowerCase().includes(lowerQuery)) return true;
      if (fiche.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      if (fiche.resume.toLowerCase().includes(lowerQuery)) return true;
      
      return false;
    });
    
    setFilteredFiches(results);
  };

  const openFicheViewer = (fiche) => {
    setOpenFiche(fiche);
  };

  const closeFicheViewer = () => {
    setOpenFiche(null);
  };

  return (
    <div>
      <SearchBar placeholder="Rechercher dans les fiches de révision" onSearch={handleSearch} />

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredFiches.map(fiche => (
          <div key={fiche.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-6 flex flex-col items-center">
              <div className="w-16 h-16 bg-gray-200 rounded flex items-center justify-center mb-4">
                <svg className="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 className="text-lg font-semibold mb-2 text-center">{fiche.title}</h3>
              <div className="flex gap-2 mb-2">
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Durée de lecture: {fiche.duration}
                </span>
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Domaine: {fiche.domaine}
                </span>
              </div>
              <div className="flex gap-2 flex-wrap justify-center mb-4">
                {fiche.tags.map(tag => (
                  <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <p className="text-sm text-gray-600 mb-4 text-center">
                {fiche.resume}
              </p>
              <button
                onClick={() => openFicheViewer(fiche)}
                className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
              >
                Consulter
              </button>
            </div>
          </div>
        ))}
      </div>

      {openFiche && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg overflow-hidden w-full max-w-4xl max-h-screen flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="font-bold">{openFiche.title}</h3>
              <button onClick={closeFicheViewer} className="text-gray-500 hover:text-gray-700">
                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            <div className="flex-grow overflow-hidden">
              <iframe 
                src={openFiche.url} 
                className="w-full h-full"
                style={{ minHeight: '80vh' }}
                title={openFiche.title}
              />
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// components/FloNU/QuizEvaluation.js
import { useState, useEffect } from 'react';
import SearchBar from '../SearchBar';

export default function QuizEvaluation() {
  const [quizzes, setQuizzes] = useState([]);
  const [filteredQuizzes, setFilteredQuizzes] = useState([]);
  const [activeQuiz, setActiveQuiz] = useState(null);
  const [userAnswers, setUserAnswers] = useState({});
  const [quizCompleted, setQuizCompleted] = useState(false);

  useEffect(() => {
    // Données factices de quiz
    const mockQuizzes = [
      {
        id: 1,
        title: 'Quiz 1 - M&A (Fusions & Acquisitions)',
        domaine: 'finance',
        tags: ['finance', 'm&a', 'entreprise'],
        questions: [
          {
            id: 1,
            question: 'Quel est l\'objectif principal d\'une opération de fusion-acquisition ?',
            options: [
              'Réduire le capital de l\'entreprise acheteuse',
              'Créer de la valeur en combinant les forces des entreprises fusionnées',
              'Limiter l\'exposition aux marchés financiers'
            ],
            correctAnswer: 1,
            explanation: 'L\'objectif clé d\'une fusion-acquisition est de générer de la valeur en réalisant des synergies (économies d\'échelle, accès à de nouveaux marchés, optimisation des coûts, etc.). L\'idée est que l\'ensemble vaut plus que la somme des parties.'
          },
          {
            id: 2,
            question: 'Quelle est la différence principale entre une fusion et une acquisition ?',
            options: [
              'Dans une fusion, les entreprises fusionnent en une seule entité, alors que dans une acquisition, l\'une prend le contrôle de l\'autre',
              'Une fusion implique forcément une transaction en cash, tandis qu\'une acquisition utilise uniquement des actions',
              'Une fusion est toujours amicale, tandis qu\'une acquisition est forcément hostile'
            ],
            correctAnswer: 0,
            explanation: 'Une fusion consiste à combiner deux entreprises pour en former une nouvelle, tandis qu\'une acquisition implique que l\'une absorbe l\'autre, qui peut disparaître ou rester une filiale. Une acquisition peut être amicale ou hostile, contrairement à une idée reçue.'
          },
          {
            id: 3,
            question: 'Quelle méthode est la plus couramment utilisée pour valoriser une entreprise dans une opération de M&A ?',
            options: [
              'La méthode des flux de trésorerie actualisés (DCF - Discounted Cash Flow)',
              'L\'analyse des coûts fixes et variables',
              'Le calcul du coût du capital propre'
            ],
            correctAnswer: 0,
            explanation: 'La méthode DCF consiste à estimer la valeur future des flux de trésorerie générés par l\'entreprise et à les actualiser pour obtenir une valeur présente. C\'est une approche robuste, bien que souvent complétée par d\'autres méthodes (comparables boursiers, transactions similaires, etc.).'
          },
          {
            id: 4,
            question: 'Qu\'est-ce qu\'une synergie dans une opération de fusion-acquisition ?',
            options: [
              'Une hausse automatique du cours de bourse après l\'opération',
              'Les économies de coûts ou gains de revenus générés par la combinaison des entreprises',
              'Une prime versée aux actionnaires de l\'entreprise cible'
            ],
            correctAnswer: 1,
            explanation: 'Les synergies sont les bénéfices attendus d\'une fusion-acquisition, qu\'ils soient financiers (réduction des coûts, économies d\'échelle) ou stratégiques (accès à un nouveau marché, innovation commune, etc.). Elles justifient en grande partie le prix payé par l\'acheteur.'
          },
          {
            id: 5,
            question: 'Qu\'est-ce qu\'une offre publique d\'achat (OPA) hostile ?',
            options: [
              'Une tentative de rachat contre la volonté du conseil d\'administration de la cible',
              'Une fusion entre deux entreprises concurrentes',
              'Un rachat effectué sans emprunt bancaire'
            ],
            correctAnswer: 0,
            explanation: 'Une OPA hostile est une offre de rachat faite directement aux actionnaires d\'une entreprise sans l\'accord de son conseil d\'administration. Cela peut entraîner des résistances et des stratégies de défense comme le poison pill ou le white knight.'
          }
        ]
      },
      {
        id: 2,
        title: 'Quiz 2 - M&A (Fusions & Acquisitions) avancé',
        domaine: 'finance',
        tags: ['finance', 'm&a', 'avancé'],
        questions: [
          {
            id: 1,
            question: 'Quelle est la principale raison d\'un rachat financé par effet de levier (LBO - Leveraged Buyout) ?',
            options: [
              'Maximiser la rentabilité pour les investisseurs en utilisant une forte part de dette',
              'Éviter de mobiliser trop de fonds propres pour un rachat',
              'Éviter toute dilution des actionnaires existants'
            ],
            correctAnswer: 0,
            explanation: 'Un LBO repose sur l\'idée que l\'endettement permet d\'augmenter le rendement pour les investisseurs. L\'acquéreur finance le rachat principalement par dette, remboursée avec les futurs flux de trésorerie de la société cible.'
          },
          {
            id: 2,
            question: 'Lors d\'une acquisition, que signifie le terme "earn-out" ?',
            options: [
              'Une clause qui permet à l\'entreprise cible d\'acheter des actions de l\'acheteur',
              'Un paiement conditionnel basé sur la performance future de l\'entreprise cible',
              'Une option pour les actionnaires minoritaires de revendre leurs parts à l\'acquéreur'
            ],
            correctAnswer: 1,
            explanation: 'Un earn-out est un paiement différé et conditionnel que l\'acquéreur verse au vendeur si la société atteint certains objectifs financiers ou stratégiques après la transaction. Cela permet de partager le risque entre acheteur et vendeur.'
          },
          {
            id: 3,
            question: 'Quelle est la principale méthode de défense contre une OPA hostile ?',
            options: [
              'Le "poison pill", qui consiste à rendre l\'acquisition plus coûteuse pour l\'attaquant',
              'Un rachat massif des actions par le management',
              'La réduction volontaire du cours de l\'action'
            ],
            correctAnswer: 0,
            explanation: 'Le poison pill est une tactique anti-OPA où la société cible émet de nouvelles actions ou modifie sa structure pour rendre l\'acquisition prohibitive pour l\'acheteur hostile. D\'autres stratégies incluent le white knight (recherche d\'un acheteur amical).'
          }
        ]
      },
      {
        id: 3,
        title: 'Quiz 3 - Consulting & Stratégie',
        domaine: 'consulting',
        tags: ['consulting', 'stratégie', 'fondamentaux'],
        questions: [
          {
            id: 1,
            question: 'Quelle est la principale mission d\'un consultant en stratégie ?',
            options: [
              'Aider les entreprises à améliorer leur compétitivité et leur rentabilité grâce à des recommandations stratégiques',
              'Gérer la comptabilité et le reporting financier des entreprises',
              'Accompagner les sociétés dans l\'implémentation de logiciels ERP'
            ],
            correctAnswer: 0,
            explanation: 'Un consultant en stratégie analyse les défis d\'une entreprise et propose des solutions pour améliorer sa position concurrentielle (croissance, digitalisation, réduction des coûts, diversification, etc.).'
          },
          {
            id: 2,
            question: 'Quelle méthodologie est la plus souvent utilisée en consulting pour structurer une analyse stratégique ?',
            options: [
              'L\'approche MECE (Mutually Exclusive, Collectively Exhaustive)',
              'La théorie des jeux appliquée aux fusions-acquisitions',
              'L\'analyse des écarts de bilan comptable'
            ],
            correctAnswer: 0,
            explanation: 'Le MECE est un principe fondamental du conseil en stratégie, où les catégories d\'analyse doivent être mutuellement exclusives (aucun chevauchement) et collectivement exhaustives (pas d\'oubli de cas possibles).'
          },
          {
            id: 3,
            question: 'Dans une étude de marché, quel est l\'objectif principal d\'une analyse SWOT ?',
            options: [
              'Identifier les forces, faiblesses, opportunités et menaces d\'une entreprise',
              'Comparer la rentabilité de l\'entreprise avec celle de ses concurrents',
              'Évaluer la satisfaction des employés par rapport à la gouvernance'
            ],
            correctAnswer: 0,
            explanation: 'L\'analyse SWOT (Strengths, Weaknesses, Opportunities, Threats) est un outil essentiel en consulting pour comprendre la position stratégique d\'une entreprise face à son marché et ses concurrents.'
          }
        ]
      }
    ];
    
    setQuizzes(mockQuizzes);
    setFilteredQuizzes(mockQuizzes);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredQuizzes(quizzes);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = quizzes.filter(quiz => {
      if (quiz.title.toLowerCase().includes(lowerQuery)) return true;
      if (quiz.domaine.toLowerCase().includes(lowerQuery)) return true;
      if (quiz.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      
      return false;
    });
    
    setFilteredQuizzes(results);
  };

  const startQuiz = (quiz) => {
    setActiveQuiz(quiz);
    setUserAnswers({});
    setQuizCompleted(false);
  };

  const handleAnswerSelect = (questionId, optionIndex) => {
    setUserAnswers({
      ...userAnswers,
      [questionId]: optionIndex
    });
  };

  const submitQuiz = () => {
    setQuizCompleted(true);
  };

  const closeQuiz = () => {
    setActiveQuiz(null);
    setUserAnswers({});
    setQuizCompleted(false);
  };

  const calculateScore = () => {
    if (!activeQuiz) return 0;
    
    let correct = 0;
    activeQuiz.questions.forEach(question => {
      if (userAnswers[question.id] === question.correctAnswer) {
        correct++;
      }
    });
    
    return Math.round((correct / activeQuiz.questions.length) * 100);
  };

  return (
    <div>
      <SearchBar placeholder="Rechercher dans les quiz" onSearch={handleSearch} />

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredQuizzes.map(quiz => (
          <div key={quiz.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-6 flex flex-col items-center">
              <div className="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4">
                <svg className="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <h3 className="text-lg font-semibold mb-2 text-center">{quiz.title}</h3>
              <div className="flex gap-2 mb-4">
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Domaine: {quiz.domaine}
                </span>
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Questions: {quiz.questions.length}
                </span>
              </div>
              <div className="flex gap-2 flex-wrap justify-center mb-4">
                {quiz.tags.map(tag => (
                  <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <button
                onClick={() => startQuiz(quiz)}
                className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
              >
                Commencer le quiz
              </button>
            </div>
          </div>
        ))}
      </div>

      {activeQuiz && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg overflow-hidden w-full max-w-3xl max-h-screen flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="font-bold">{activeQuiz.title}</h3>
              <button onClick={closeQuiz} className="text-gray-500 hover:text-gray-700">
                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            
            <div className="flex-grow overflow-y-auto p-6">
              {!quizCompleted ? (
                <>
                  {activeQuiz.questions.map((question, index) => (
                    <div key={question.id} className="mb-8">
                      <h4 className="font-medium text-lg mb-3">
                        {index + 1}. {question.question}
                      </h4>
                      <div className="space-y-2">
                        {question.options.map((option, optionIndex) => (
                          <div key={optionIndex} className="flex items-center">
                            <input
                              type="radio"
                              id={`q${question.id}-option${optionIndex}`}
                              name={`question-${question.id}`}
                              value={optionIndex}
                              checked={userAnswers[question.id] === optionIndex}
                              onChange={() => handleAnswerSelect(question.id, optionIndex)}
                              className="h-4 w-4 text-blue-600 focus:ring-blue-500"
                            />
                            <label
                              htmlFor={`q${question.id}-option${optionIndex}`}
                              className="ml-3 block text-gray-700"
                            >
                              {option}
                            </label>
                          </div>
                        ))}
                      </div>
                    </div>
                  ))}
                  
                  <div className="mt-8 flex justify-center">
                    <button
                      onClick={submitQuiz}
                      className="bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600"
                      disabled={Object.keys(userAnswers).length !== activeQuiz.questions.length}
                    >
                      Valider mes réponses
                    </button>
                  </div>
                </>
              ) : (
                <>
                  <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                    <div className="flex">
                      <div className="flex-shrink-0">
                        <svg className="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                          <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z" clipRule="evenodd" />
                        </svg>
                      </div>
                      <div className="ml-3">
                        <p className="text-sm text-blue-700">
                          Votre score: <span className="font-bold">{calculateScore()}%</span>
                        </p>
                        {calculateScore() >= 80 ? (
                          <p className="text-sm text-green-600 mt-1">Excellent ! Vous maîtrisez ce sujet.</p>
                        ) : calculateScore() >= 60 ? (
                          <p className="text-sm text-blue-600 mt-1">Bon travail. Revoyez quelques concepts pour vous améliorer.</p>
                        ) : (
                          <p className="text-sm text-red-600 mt-1">Nous vous recommandons de revoir les fiches de révision sur ce sujet.</p>
                        )}
                      </div>
                    </div>
                  </div>
                  
                  {activeQuiz.questions.map((question, index) => {
                    const isCorrect = userAnswers[question.id] === question.correctAnswer;
                    
                    return (
                      <div key={question.id} className="mb-8">
                        <h4 className="font-medium text-lg mb-3">
                          {index + 1}. {question.question}
                        </h4>
                        <div className="space-y-2">
                          {question.options.map((option, optionIndex) => (
                            <div 
                              key={optionIndex} 
                              className={`p-3 rounded ${
                                optionIndex === question.correctAnswer 
                                  ? 'bg-green-100 border border-green-400' 
                                  : userAnswers[question.id] === optionIndex
                                    ? 'bg-red-100 border border-red-400'
                                    : 'bg-gray-50 border border-gray-200'
                              }`}
                            >
                              {option}
                            </div>
                          ))}
                        </div>
                        
                        <div className={`mt-3 p-3 border-l-4 rounded ${
                          isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'
                        }`}>
                          <p className={`text-sm ${isCorrect ? 'text-green-700' : 'text-red-700'}`}>
                            <span className="font-bold">
                              {isCorrect ? '✓ Correct' : '✗ Incorrect'}
                            </span>
                            <br />
                            <span className="font-bold">Explication: </span>
                            {question.explanation}
                          </p>
                        </div>
                      </div>
                    );
                  })}
                  
                  <div className="mt-8 flex justify-center">
                    <button
                      onClick={closeQuiz}
                      className="bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600"
                    >
                      Terminer
                    </button>
                  </div>
                </>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// components/FloNU/CasPratiques.js
import { useState, useEffect } from 'react';
import SearchBar from '../SearchBar';

export default function CasPratiques() {
  const [casPratiques, setCasPratiques] = useState([]);
  const [filteredCas, setFilteredCas] = useState([]);
  const [selectedCas, setSelectedCas] = useState(null);
  const [showSolution, setShowSolution] = useState(false);
  
  useEffect(() => {
    // Données factices de cas pratiques
    const mockCasPratiques = [
      {
        id: 1,
        title: 'Analyse de rentabilité d\'une chaîne de supermarchés',
        domaine: 'consulting',
        duration: '45min',
        tags: ['consulting', 'retail', 'stratégie'],
        enonce: `Votre client est un groupe de supermarchés. Le groupe dispose de 200 magasins répartis sur le territoire sans biais particulier. Le supermarché type dispose d'une surface de 2000m² et se trouve généralement dans des zones péri-urbaines : accès plutôt en voiture ou en marchant, petit parking devant le magasin, devantures limitées. Le client a besoin de vous pour comprendre l'érosion de la rentabilité du réseau et de construire un plan d'amélioration. Le chiffre d'affaires est de 2Bn€ avec une rentabilité (EBITDA) de 5% ce qui est inférieur aux concurrents qui parviennent pour certains à atteindre 10%.`,
        solution: `a/ La première étape consiste à bien comprendre la décomposition du P&L, qui peut être assez surprenant. Une première discussion consiste à identifier les principaux postes et à les quantifier en grosses mailles. Les achats constituent évidemment le gros du P&L, ce qui donne des marges brutes très basses (aux alentours de 20%). Viennent ensuite les frais de personnel, les loyers, les consommations d'électricité notamment (réfrigérateurs).

Il existe un autre poste de coûts important, sauriez-vous réfléchir à ce que cela peut être ? Imaginez ce qu'est la vie d'un supermarché ?

Le poste qui s'appelle « casse » est effectivement assez important, il comprend la casse des denrées pendant les mises en magasin, les articles périmés et le vol. Il peut représenter jusqu'à 2% du CA.

b/ Exercice de dimensionnement : que représentent les frais de personnel dans un supermarché en % du CA ?

Réponse : imaginons un supermarché standard. Son CA est de 10m€ (2bn€ / 200 magasins). 2000m² correspond pour les parisiens à un grand Carrefour Market. Il faut savoir qu'il y a environ 1 caissier pour 1 back office. 1 manager et 1 comptable. Pour trouver le nombre de caissiers : les magasins sont ouverts environ 12h dans la journée. Il faut qu'il y ait toujours 2 caisses ouvertes. Les magasins sont également ouverts le samedi. On trouve qu'il faut entre 5 et 6 caissiers. Disons donc que le staff est en tout décomposé comme : 1 manager (6k/m avec charges), 1 comptable (4k€/m avec charges), 12 personnes en magasin (3k€/m avec charges) soit 46k€ par mois => Environ 550k€ par an ce qui fait 5.5% du CA`
      },
      {
        id: 2,
        title: 'Estimation de marché pour un lancement de produit',
        domaine: 'consulting',
        duration: '30min',
        tags: ['consulting', 'market sizing', 'lancement'],
        enonce: `Votre client est un fabricant de smartphones qui souhaite lancer un nouveau téléphone pliable haut de gamme. Estimez la taille du marché européen pour ce produit et proposez une stratégie de lancement.`,
        solution: `Pour estimer la taille du marché européen pour un smartphone pliable haut de gamme, nous pouvons utiliser l'approche top-down :

1. Population de l'UE : environ 450 millions
2. Taux de pénétration des smartphones : environ 80% = 360 millions d'utilisateurs
3. Renouvellement moyen tous les 2-3 ans, donc 120-180 millions de nouveaux smartphones par an
4. Part de marché du haut de gamme : environ 20% = 24-36 millions de smartphones haut de gamme par an
5. Intérêt potentiel pour les téléphones pliables dans ce segment : estimé à 5-10% initialement
6. Marché potentiel : 1,2 à 3,6 millions d'unités par an

Pour la stratégie de lancement, je recommanderais :
- Un lancement progressif, en commençant par les marchés les plus développés (Allemagne, France, UK)
- Partenariats avec des opérateurs premium
- Programme de reprise avantageux des anciens appareils
- Fortes activités marketing centrées sur l'innovation et l'exclusivité`
      },
      {
        id: 3,
        title: 'Évaluation d\'une acquisition stratégique',
        domaine: 'finance',
        duration: '60min',
        tags: ['finance', 'm&a', 'valorisation'],
        enonce: `Vous êtes conseiller financier pour une grande entreprise pharmaceutique qui envisage d'acquérir une biotech spécialisée dans l'immunothérapie. La cible a un médicament prometteur en phase III, avec 70% de chances d'approbation selon les experts. Proposez une méthode pour valoriser cette acquisition et les points d'attention clés pour la transaction.`,
        solution: `Pour valoriser cette acquisition, je recommande une approche DCF (Discounted Cash Flow) ajustée par les probabilités, complétée par une analyse des comparables :

1. DCF ajusté par les probabilités :
   - Modéliser les revenus potentiels du médicament en phase III en cas de succès
   - Ajuster les flux de trésorerie futurs par la probabilité de succès (70%)
   - Tenir compte des différents scénarios d'approbation (complète, partielle, retardée)
   - Actualiser avec un taux reflétant le risque (WACC de 10-12% typique pour ce secteur)

2. Analyse des transactions comparables :
   - Identifier des acquisitions récentes de biotechs à un stade similaire
   - Analyser les multiples payés (VE/EBITDA prévisionnel, prix/potentiel de ventes peak)

Points d'attention clés :
- Structure de la transaction : prévoir des paiements d'étape (milestones) liés au succès
- Protections de PI et durée des brevets
- Évaluation des autres actifs du pipeline
- Due diligence approfondie sur les données cliniques et risques réglementaires
- Synergies potentielles avec le portefeuille existant (R&D, commercial)
- Analyse des risques de concurrence et de substitution`
      }
    ];
    
    setCasPratiques(mockCasPratiques);
    setFilteredCas(mockCasPratiques);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredCas(casPratiques);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = casPratiques.filter(cas => {
      if (cas.title.toLowerCase().includes(lowerQuery)) return true;
      if (cas.domaine.toLowerCase().includes(lowerQuery)) return true;
      if (cas.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      if (cas.enonce.toLowerCase().includes(lowerQuery)) return true;
      
      return false;
    });
    
    setFilteredCas(results);
  };

  const openCas = (cas) => {
    setSelectedCas(cas);
    setShowSolution(false);
  };

  const closeCas = () => {
    setSelectedCas(null);
    setShowSolution(false);
  };

  const toggleSolution = () => {
    setShowSolution(!showSolution);
  };

  return (
    <div>
      <SearchBar placeholder="Rechercher dans les cas pratiques" onSearch={handleSearch} />

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredCas.map(cas => (
          <div key={cas.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-6 flex flex-col items-center">
              <div className="w-16 h-16 bg-gray-200 rounded flex items-center justify-center mb-4">
                <svg className="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                </svg>
              </div>
              <h3 className="text-lg font-semibold mb-2 text-center">{cas.title}</h3>
              <div className="flex gap-2 mb-2">
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Durée recommandée: {cas.duration}
                </span>
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Domaine: {cas.domaine}
                </span>
              </div>
              <div className="flex gap-2 flex-wrap justify-center mb-4">
                {cas.tags.map(tag => (
                  <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <button
                onClick={() => openCas(cas)}
                className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
              >
                Voir le cas
              </button>
            </div>
          </div>
        ))}
      </div>

      {selectedCas && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg overflow-hidden w-full max-w-4xl max-h-screen flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="font-bold">{selectedCas.title}</h3>
              <button onClick={closeCas} className="text-gray-500 hover:text-gray-700">
                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            <div className="flex-grow overflow-y-auto p-6">
              <div className="bg-gray-50 p-4 rounded-md mb-6">
                <h4 className="font-medium mb-2">Énoncé</h4>
                <p className="whitespace-pre-line">{selectedCas.enonce}</p>
              </div>
              
              <div className="flex justify-center mb-6">
                <button
                  onClick={toggleSolution}
                  className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
                >
                  {showSolution ? 'Masquer la solution' : 'Afficher la solution indicative'}
                </button>
              </div>
              
              {showSolution && (
                <div className="bg-blue-50 p-4 rounded-md border border-blue-200">
                  <h4 className="font-medium mb-2">Solution indicative</h4>
                  <p className="whitespace-pre-line">{selectedCas.solution}</p>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// components/FloNU/RessourcesEntretiens.js
import { useState, useEffect } from 'react';
import SearchBar from '../SearchBar';

export default function RessourcesEntretiens() {
  const [ressources, setRessources] = useState([]);
  const [filteredRessources, setFilteredRessources] = useState([]);
  const [openRessource, setOpenRessource] = useState(null);
  
  useEffect(() => {
    // Données factices de ressources sur les entretiens
    const mockRessources = [
      {
        id: 1,
        title: 'Guide d\'entretien - Cabinets d\'avocats d\'affaires',
        domaine: 'droit',
        tags: ['droit', 'entretien', 'cabinet'],
        description: 'Guide de préparation aux entretiens dans les cabinets d\'avocats d\'affaires.',
        url: 'https://fondationflorence.my.salesforce.com/sfc/p/07000000ZXDA/a/Jv000008dV0v/0TMCzmlen00i_Qo_I.QsMC.TuDGY3FjaoAWbNLnAVwY'
      },
      {
        id: 2,
        title: 'Guide d\'entretien - Banques d\'investissement',
        domaine: 'finance',
        tags: ['finance', 'entretien', 'banque'],
        description: 'Guide de préparation aux entretiens dans les banques d\'investissement.',
        url: 'https://engagement-guide-du-supr-rebzrbp.gamma.site/'
      },
      {
        id: 3,
        title: 'Guide d\'entretien - Cabinets de conseil en stratégie',
        domaine: 'consulting',
        tags: ['consulting', 'entretien', 'stratégie'],
        description: 'Guide de préparation aux entretiens dans les cabinets de conseil en stratégie.',
        url: 'https://florence-mentorship-cd8wzmm.gamma.site/copy-of-engagement-guide'
      }
    ];
    
    setRessources(mockRessources);
    setFilteredRessources(mockRessources);
  }, []);

  const handleSearch = (query) => {
    if (!query) {
      setFilteredRessources(ressources);
      return;
    }
    
    const lowerQuery = query.toLowerCase();
    const results = ressources.filter(ressource => {
      if (ressource.title.toLowerCase().includes(lowerQuery)) return true;
      if (ressource.domaine.toLowerCase().includes(lowerQuery)) return true;
      if (ressource.tags.some(tag => tag.toLowerCase().includes(lowerQuery))) return true;
      if (ressource.description.toLowerCase().includes(lowerQuery)) return true;
      
      return false;
    });
    
    setFilteredRessources(results);
  };

  const openRessourceViewer = (ressource) => {
    setOpenRessource(ressource);
  };

  const closeRessourceViewer = () => {
    setOpenRessource(null);
  };

  return (
    <div>
      <SearchBar placeholder="Rechercher dans les ressources sur les entretiens" onSearch={handleSearch} />

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredRessources.map(ressource => (
          <div key={ressource.id} className="bg-white rounded-lg shadow-md overflow-hidden">
            <div className="p-6 flex flex-col items-center">
              <div className="w-16 h-16 bg-gray-200 rounded flex items-center justify-center mb-4">
                <svg className="h-8 w-8 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 className="text-lg font-semibold mb-2 text-center">{ressource.title}</h3>
              <div className="mb-2">
                <span className="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">
                  Domaine: {ressource.domaine}
                </span>
              </div>
              <div className="flex gap-2 flex-wrap justify-center mb-4">
                {ressource.tags.map(tag => (
                  <span key={tag} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <p className="text-sm text-gray-600 mb-4 text-center">
                {ressource.description}
              </p>
              <button
                onClick={() => openRessourceViewer(ressource)}
                className="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"
              >
                Consulter
              </button>
            </div>
          </div>
        ))}
      </div>

      {openRessource && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg overflow-hidden w-full max-w-4xl max-h-screen flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="font-bold">{openRessource.title}</h3>
              <button onClick={closeRessourceViewer} className="text-gray-500 hover:text-gray-700">
                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            <div className="flex-grow overflow-hidden">
              <iframe 
                src={openRessource.url} 
                className="w-full h-full"
                style={{ minHeight: '80vh' }}
                title={openRessource.title}
              />
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// styles/globals.css
html,
body {
  padding: 0;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,
    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
}

a {
  color: inherit;
  text-decoration: none;
}

* {
  box-sizing: border-box;
}

// pages/_app.js
import '../styles/globals.css';
import 'tailwindcss/tailwind.css';

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />;
}

export default MyApp;
